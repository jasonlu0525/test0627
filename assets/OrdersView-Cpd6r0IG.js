import{_ as y,a as _,L as v,c as n,d as $,b as t,F as c,h as g,r as x,o,t as l,f,w as L,q as M}from"./index-as_EUU8_.js";var w={BASE_URL:"/test0627/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:p,VITE_PATH:u}=w,C={data(){return{isLoading:!1,tempOrder:{},selectID:"",orders:[],pages:{}}},methods:{getOrders(s=1){this.isLoading=!0;const a=`${p}/api/${u}/admin/orders?page=${s}`;_.get(a).then(i=>{this.orders=i.data.orders,this.pages=i.data.pagination}).catch(i=>{console.log("err",i)}),setTimeout(()=>{this.isLoading=!1},1e3)},openModal(s="check",a){s=="dele"?this.$refs.dModal.openModal():this.$refs.oModal.openModal(),this.tempOrder={...a}},updatePaid(s){const a=`${p}/api/${u}/admin/order/${s.id}`,i="put",m={is_paid:s.is_paid};_[i](a,{data:m}).then(()=>{})},delOrder(s){const a=`${p}/api/${u}/admin/order/${s}`;_["delete"](a).then(()=>{})}},created(){this.getOrders()},mounted(){},components:{Loading:v}},V={class:"container"},D={class:"mt-4"},O=t("h2",{class:"d-flex justify-content-center",style:{"margin-top":"75px"}},"訂單列表",-1),E={class:"table"},S=t("thead",null,[t("tr",null,[t("th",{width:"120"},"下單時間"),t("th",{width:"120"},"Email"),t("th",null,"訂單品項"),t("th",null,"應付金額"),t("th",{width:"100"},"付款狀態"),t("th",{width:"220"},"編輯")])],-1),B={key:0},P=["textContent"],R={class:"text-start"},T={class:"text-right"},U={class:"form-check form-switch"},I=["id","onUpdate:modelValue","onChange"],N=["for"],q={key:0},A={key:1},F={class:"btn-group"},j=["onClick"],H=["onClick"];function z(s,a,i,m,h,r){const b=x("Loading");return o(),n(c,null,[$(b,{active:h.isLoading},null,8,["active"]),t("div",V,[t("div",D,[O,t("table",E,[S,t("tbody",null,[(o(!0),n(c,null,g(h.orders,e=>(o(),n(c,{key:e.id},[h.orders.length?(o(),n("tr",B,[t("td",null,l(new Date(e.create_at*1e3).toLocaleDateString()),1),t("td",null,[e.user?(o(),n("span",{key:0,textContent:l(e.user.email)},null,8,P)):f("",!0)]),t("td",R,[t("ul",null,[(o(!0),n(c,null,g(e.products,(d,k)=>(o(),n("li",{key:k}," 品項 : "+l(d.product.title)+" / "+l(d.qty)+l(d.product.unit),1))),128))])]),t("td",T,l(e.total),1),t("td",null,[t("div",U,[L(t("input",{class:"form-check-input",type:"checkbox",id:`paidSwitch${e.id}`,"onUpdate:modelValue":d=>e.is_paid=d,onChange:d=>r.updatePaid(e)},null,40,I),[[M,e.is_paid]]),t("label",{class:"form-check-label",for:`paidSwitch${e.id}`},[e.is_paid?(o(),n("span",q,"已付款")):(o(),n("span",A,"未付款"))],8,N)])]),t("td",null,[t("div",F,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:d=>r.openModal("check",e)}," 查看細節 ",8,j),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:d=>r.openModal("dele",e)}," 刪除訂單 ",8,H)])])])):f("",!0)],64))),128))])])])])],64)}const J=y(C,[["render",z]]);export{J as default};
